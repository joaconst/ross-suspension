---
import "swiper/css";
import "swiper/css/navigation";
import "swiper/css/pagination";

interface Props {
  desktopImages: {
    url: string;
    alt: string;
  }[];
  mobileImages: {
    url: string;
    alt: string;
  }[];
}

// Ejemplo de im치genes de respaldo
const defaultDesktopImages = [{ url: "", alt: "Imagen Desktop" }];
const defaultMobileImages = [{ url: "", alt: "Imagen Mobile" }];

const {
  desktopImages = defaultDesktopImages,
  mobileImages = defaultMobileImages,
} = Astro.props;
---

<section class="carousel-container">
  <!-- Slider para Desktop -->
  <div class="swiper desktop-slider">
    <div class="swiper-wrapper">
      {
        desktopImages.map((image) => (
          <div class="swiper-slide">
            <img src={image.url} alt={image.alt} />
          </div>
        ))
      }
    </div>
    <div class="swiper-pagination"></div>
  </div>

  <!-- Slider para Mobile -->
  <div class="swiper mobile-slider">
    <div class="swiper-wrapper">
      {
        mobileImages.map((image) => (
          <div class="swiper-slide">
            <img src={image.url} alt={image.alt} />
          </div>
        ))
      }
    </div>
    <div class="swiper-pagination"></div>
  </div>
</section>

<style>
  .carousel-container {
    width: 100%;
    margin-bottom: 40px;
  }

  /* Por defecto se muestra el slider desktop */
  .desktop-slider {
    display: block;
  }
  .mobile-slider {
    display: none;
  }

  /* En pantallas peque침as, se oculta el slider desktop y se muestra el mobile */
  @media (max-width: 640px) {
    .desktop-slider {
      display: none;
    }
    .mobile-slider {
      display: block;
      height: 75vh;
    }
  }

  .swiper {
    width: 100%;
    height: 100%;
  }

  .swiper-slide {
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .swiper-slide img {
    width: 100%;
    height: auto;
    object-fit: cover;
  }

  @media (min-width: 768px) {
    .swiper-slide img {
        border-top-left-radius: 25px;
        border-bottom-left-radius: 25px;
    }
}
</style>

<script>
  import Swiper from "swiper";
  import { Navigation, Pagination, Autoplay } from "swiper/modules";

  // Inicializaci칩n del slider desktop
  const desktopSwiper = new Swiper(".desktop-slider", {
    modules: [Navigation, Pagination, Autoplay],
    loop: true,
    autoplay: {
      delay: 3000,
      disableOnInteraction: false,
    },
    pagination: {
      el: ".desktop-slider .swiper-pagination",
      clickable: true,
    },
  });

  // Inicializaci칩n del slider mobile
  const mobileSwiper = new Swiper(".mobile-slider", {
    modules: [Navigation, Pagination, Autoplay],
    loop: true,
    autoplay: {
      delay: 3000,
      disableOnInteraction: false,
    },
    pagination: {
      el: ".mobile-slider .swiper-pagination",
      clickable: true,
    },
    slidesPerView: 1,
  });
</script>
